# DonTouchMe 可执行文件使用说明

## 📦 打包完成

恭喜！DonTouchMe 已成功打包为 Windows 可执行文件。

## 📂 文件位置

可执行文件位于：`dist/DonTouchMe/`

```
dist/DonTouchMe/
├── DonTouchMe.exe        ← 主程序 (5.8 MB)
└── _internal/            ← 依赖文件（必需）
    ├── Python DLL
    ├── PyQt5 库
    ├── OpenCV 库
    └── 其他依赖
```

## 🚀 使用方法

### 方法 1: 直接运行（推荐）
直接双击 `dist/DonTouchMe/DonTouchMe.exe` 即可启动程序。

### 方法 2: 创建桌面快捷方式
1. 右键点击 `DonTouchMe.exe`
2. 选择"发送到" → "桌面快捷方式"
3. 双击桌面快捷方式启动

### 方法 3: 开机自动启动
启动程序后，在系统托盘图标右键菜单中勾选"开机自动启动"。

## ⚠️ 重要提示

### 1. 文件完整性
**必须保留 `_internal` 文件夹！**

- ✅ 正确: 将整个 `DonTouchMe` 文件夹复制到其他位置
- ❌ 错误: 只复制 `DonTouchMe.exe` 文件（会导致程序无法运行）

### 2. 数据文件
首次运行时，程序会在可执行文件所在目录创建：
```
DonTouchMe/
├── data/                 ← 数据目录（自动创建）
│   ├── config.json       ← 配置文件
│   ├── history.db        ← 历史记录数据库
│   └── captures/         ← 照片和截图
│       ├── camera/
│       └── screen/
└── logs/                 ← 日志目录（自动创建）
    └── dontouchme_YYYYMMDD.log
```

### 3. 配置 PushPlus Token
第一次运行前，请配置通知 Token：

**方法 A**: 手动编辑配置文件
1. 启动程序后，在 `data/config.json` 中修改：
```json
{
  "notification": {
    "enabled": true,
    "token": "你的PushPlus_Token"
  }
}
```

**方法 B**: 使用 GUI 配置
1. 启动程序
2. 右键系统托盘图标 → "配置"
3. 在"通知设置"中填入 PushPlus Token

## 📋 功能说明

### 系统托盘菜单
- **手动触发**: 立即拍照、截图、发送通知
- **配置**: 打开配置窗口
- **历史记录**: 查看监控历史
- **任务计划**: 管理 Windows 任务（需要管理员权限）
- **开机自动启动**: 勾选后开机自动运行
- **启用后台监控**: 监听系统睡眠/唤醒事件
- **退出**: 关闭程序

### 后台监控
- ✅ **开机检测**: 程序随系统启动时自动触发监控
- ✅ **睡眠唤醒检测**: 系统从休眠恢复时自动触发监控
- ✅ **去抖动**: 30 秒内重复事件不会重复触发

## 🔧 分发给其他用户

### 单机使用
将整个 `dist/DonTouchMe` 文件夹复制到目标电脑即可。

### 创建安装包（可选）
使用 Inno Setup 或 NSIS 创建安装程序：
```
[需要时创建]
- 安装到 Program Files
- 创建开始菜单快捷方式
- 创建桌面图标
- 卸载功能
```

## 📊 文件大小

- **可执行文件**: 5.8 MB
- **完整文件夹**: 约 150 MB（包含所有依赖）

## 🐛 故障排除

### 问题 1: 双击后没有反应
**原因**: 缺少 `_internal` 文件夹或依赖文件损坏
**解决**: 确保完整复制整个 `DonTouchMe` 文件夹

### 问题 2: 摄像头无法使用
**原因**: 摄像头被其他程序占用
**解决**: 关闭其他使用摄像头的程序（如 Teams, Zoom）

### 问题 3: 通知发送失败
**原因**: PushPlus Token 未配置或无效
**解决**:
1. 检查 `data/config.json` 中的 token
2. 确保网络连接正常
3. 验证 token 在 PushPlus 官网仍有效

### 问题 4: 唤醒事件不触发
**原因**: 后台监控未启用
**解决**: 右键托盘图标 → 勾选"启用后台监控"

### 问题 5: 查看详细日志
日志位于: `logs/dontouchme_YYYYMMDD.log`

## 🔄 更新程序

1. 关闭正在运行的程序
2. 备份 `data/` 文件夹（保留配置和历史记录）
3. 用新版本替换 `DonTouchMe.exe` 和 `_internal/` 文件夹
4. 恢复 `data/` 文件夹
5. 重新启动程序

## 📞 技术支持

- **GitHub**: https://github.com/woodmeone/DonTouchMe
- **问题反馈**: 在 GitHub 上提交 Issue
- **日志文件**: 遇到问题时请附上日志文件

## ⚖️ 许可证

本程序按原样提供，仅供个人使用。

---

## 🎯 快速开始

1. 解压/复制整个 `DonTouchMe` 文件夹到任意位置
2. 双击 `DonTouchMe.exe` 启动程序
3. 右键系统托盘图标 → "配置" → 填入 PushPlus Token
4. 右键托盘图标 → 勾选"开机自动启动"
5. 右键托盘图标 → 勾选"启用后台监控"
6. 完成！程序将在后台监控电脑访问

享受使用吧！🎉
