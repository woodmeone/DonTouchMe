# DonTouchMe GUI 使用说明

## 功能概览

DonTouchMe 现在提供了完整的图形界面（GUI），包括：
- ✅ 系统托盘应用（隐藏到托盘，不显示在任务栏）
- ✅ 可视化配置管理（PushPlus Token、摄像头、截图设置）
- ✅ 历史记录查看（日期、图片预览、统计信息）
- ✅ SQLite 数据库存储历史记录
- ✅ 启用/禁用监控功能
- ✅ 手动触发功能

---

## 启动 GUI 应用

### 方法1：双击运行（推荐）
```bash
双击 gui.py 文件
```

### 方法2：命令行运行
```bash
python gui.py
```

---

## 使用指南

### 1. 系统托盘功能

启动后，应用会自动隐藏到系统托盘（任务栏右下角），不会显示在任务栏。

**托盘图标交互**:
- **双击图标**: 打开配置设置窗口
- **右键图标**: 显示菜单

**托盘菜单选项**:
- **配置设置**: 打开配置管理窗口
- **历史记录**: 打开历史记录查看窗口
- **禁用监控/启用监控**: 切换监控状态
- **手动触发**: 立即执行一次监控任务
- **退出**: 退出应用（会提示确认）

---

### 2. 配置管理窗口

**打开方式**: 双击托盘图标 或 右键菜单 > 配置设置

**可配置项**:

#### 微信通知设置
- **启用通知**: 是否启用微信通知功能
- **PushPlus Token**: 填写您的 PushPlus Token
  - 获取地址: http://www.pushplus.plus/

#### 摄像头设置
- **启用摄像头**: 是否启用摄像头拍照
- **设备ID**: 摄像头设备编号（默认 0）
- **分辨率**: 选择拍照分辨率
  - 640x480（推荐，图片较小）
  - 1280x720
  - 1920x1080

#### 屏幕截图设置
- **启用截图**: 是否启用屏幕截图
- **图片质量**: 1-100（默认 85）

**保存配置**: 点击"保存配置"按钮后立即生效

---

### 3. 历史记录查看窗口

**打开方式**: 右键托盘菜单 > 历史记录

**功能**:
- **记录列表**: 显示所有监控历史记录
  - ID、类型（开机/唤醒/手动）、时间、通知状态、通知方式
- **类型筛选**: 按触发类型筛选（全部/开机/唤醒/手动）
- **查看详情**: 点击记录查看详细信息和图片预览
- **图片预览**: 显示摄像头照片和屏幕截图
- **删除记录**: 选中记录后点击"删除选中记录"
- **统计信息**: 底部显示总记录数、各类型记录数、通知成功率

---

### 4. 监控控制

**启用/禁用监控**:
- 右键托盘菜单 > 禁用监控/启用监控
- 禁用后，自动监控（开机/唤醒）将停止
- 手动触发功能仍然可用

**手动触发**:
- 右键托盘菜单 > 手动触发
- 立即执行一次监控任务（拍照、截图、发送通知）
- 执行完成后会显示通知

---

## 关闭行为

**点击窗口关闭按钮**:
- 窗口会隐藏，应用仍在后台运行
- 监控功能继续工作

**退出应用**:
- 右键托盘菜单 > 退出
- 会提示确认，确认后才会真正退出
- 退出后所有监控功能停止

---

## 数据库存储

**数据库位置**: `data/history.db`

**存储内容**:
- 触发类型（boot/wake/manual）
- 触发时间
- 摄像头照片路径
- 屏幕截图路径
- 通知发送状态
- 通知发送方式

**数据查看**: 通过"历史记录"窗口查看所有数据

---

## 常见问题

### Q1: 托盘图标在哪里？
A: 在任务栏右下角的系统托盘区域，可能需要点击"^"展开隐藏的图标。

### Q2: 如何彻底退出应用？
A: 右键托盘图标 > 退出 > 点击"是"确认。

### Q3: 修改配置后需要重启应用吗？
A: 不需要，保存配置后立即生效。

### Q4: 历史记录的图片存储在哪里？
A:
- 摄像头照片: `data/captures/camera/`
- 屏幕截图: `data/captures/screen/`

### Q5: 可以删除历史记录吗？
A: 可以，在"历史记录"窗口中选中记录后点击"删除选中记录"。

---

## 开发阶段总结

✅ **Stage 1**: CLI MVP - 已完成
✅ **Stage 2**: Windows 任务计划程序集成 - 已完成
✅ **Stage 3**: 数据库历史记录（SQLite）- 已完成
✅ **Stage 4**: GUI 界面（PyQt5）- 已完成

**下一步**:
- 可以考虑添加开机自启动功能
- 可以考虑添加更多统计图表
- 可以考虑添加主题切换功能

---

## 联系与支持

如有问题或建议，请通过项目仓库反馈。
